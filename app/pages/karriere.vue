<script setup lang="ts">
  import { computed, onBeforeUnmount, onMounted, ref } from 'vue'

  type Benefit = {
    icon: string
    title: string
    description: string
  }

  type Track = {
    title: string
    description: string
    accent: 'gold' | 'cyan'
    link: string
  }

  type Position = {
    title: string
    category: string
    description: string
    link: string
  }

  const benefits: Benefit[] = [
    {
      icon: 'üìà',
      title: 'Stabiler Wirtschaftszweig',
      description: 'Eins√§tze in einem resilienten Markt mit langfristigen Partnerschaften und klaren Abl√§ufen.'
    },
    {
      icon: 'ü§ù',
      title: 'Teamkultur mit Haltung',
      description:
        'Ehrliche Kommunikation, kurze Wege und F√ºhrungskr√§fte, die selbst aus der Praxis kommen.'
    },
    {
      icon: 'üõ†Ô∏è',
      title: 'Moderne Ausstattung',
      description: 'PSA, digitale Einsatzsteuerung und Dokumentation, damit du sicher und effizient arbeitest.'
    },
    {
      icon: 'üéØ',
      title: 'Individuelle Entwicklung',
      description: 'Weiterbildungen, Zusatzberechtigungen und Unterst√ºtzung bei neuen Qualifikationen.'
    },
    {
      icon: 'üí°',
      title: 'Abwechslungsreiche Projekte',
      description: 'Cargo, Bau, Terminal und Hafen ‚Äì wir kombinieren Routine mit spannenden Spezialaufgaben.'
    },
    {
      icon: 'üåø',
      title: 'Gesund bleiben',
      description: 'Gesundheitsangebote, planbare Schichten und feste Ansprechpartner f√ºr deine Einsatzplanung.'
    }
  ]

  const tracks: Track[] = [
    {
      title: 'Ausbildung & Praktikum',
      description:
        'Starte nach der Schule in einem vielseitigen Berufsbild. Wir begleiten dich mit Mentoring, sicherer Technik und klaren Lernpfaden.',
      accent: 'gold',
      link: '#jobs'
    },
    {
      title: 'Fach- & F√ºhrungskraft',
      description:
        'Bringe deine Erfahrung ein oder wage den n√§chsten Schritt. Wir bieten dir Verantwortung, Struktur und modern ausgestattete Eins√§tze.',
      accent: 'cyan',
      link: '#jobs'
    }
  ]

  const positions: Position[] = [
    {
      title: 'Triebfahrzeugf√ºhrer (m/w/d) ‚Äì Cargo & Bau',
      category: 'Lok & Traktion',
      description: 'Fahre moderne Loks im G√ºter- und Bauzugverkehr ‚Äì sicher, p√ºnktlich und dokumentiert.',
      link: '/kontakt'
    },
    {
      title: 'Zweiwegebaggerf√ºhrer (m/w/d)',
      category: 'Bau & Infrastruktur',
      description: 'Bewege Schotter, Schwellen und Schienen punktgenau und unterst√ºtzt Baustellenlogistik.',
      link: '/kontakt'
    },
    {
      title: 'Rangierbegleiter:in Bau (m/w/d)',
      category: 'Rangier & Sicherheit',
      description: 'Sorge auf Baustellen und Werksgleisen f√ºr sichere Rangierabl√§ufe und reibungslose √úbergaben.',
      link: '/kontakt'
    },
    {
      title: 'Wagenpr√ºfer:in (m/w/d) ‚Äì bis Stufe 4',
      category: 'Pr√ºfung & Qualit√§t',
      description:
        'F√ºhre Wagenpr√ºfungen durch, erstelle Lauff√§higkeitsuntersuchungen und dokumentiere auditierbar.',
      link: '/kontakt'
    }
  ]

  const scrollY = ref(0)
  const heroDrift = computed(() => Math.min(scrollY.value * 0.08, 60))
  const gradientShift = computed(() => Math.min(scrollY.value * 0.04, 30))

  const handleScroll = () => {
    scrollY.value = window.scrollY
  }

  onMounted(() => {
    scrollY.value = window.scrollY
    window.addEventListener('scroll', handleScroll, { passive: true })
  })

  onBeforeUnmount(() => {
    window.removeEventListener('scroll', handleScroll)
  })
</script>

<template>
  <div class="career-page">
    <section class="career-hero">
      <div class="career-hero__bg" aria-hidden="true">
        <div class="career-hero__beam career-hero__beam--one" :style="{ transform: `translateY(${heroDrift}px)` }" />
        <div class="career-hero__beam career-hero__beam--two" :style="{ transform: `translateY(${heroDrift * -1}px)` }" />
        <div
          class="career-hero__glow career-hero__glow--left"
          :style="{ transform: `translateY(${gradientShift}px)` }"
        />
        <div
          class="career-hero__glow career-hero__glow--right"
          :style="{ transform: `translateY(${gradientShift * -1}px)` }"
        />
      </div>
      <div class="career-hero__grid">
        <div class="career-hero__copy">
          <p class="eyebrow">Karriere bei Babylon Bahndienste</p>
          <h1>Dein n√§chster Schritt auf der Schiene beginnt hier.</h1>
          <p class="career-hero__lead">
            Wir verbinden Sicherheit, moderne Technik und eine Kultur des Miteinanders. Ganz gleich, ob du einsteigst,
            quer einsteigst oder den n√§chsten Karriereschritt planst ‚Äì wir machen den Weg frei.
          </p>
          <div class="career-hero__actions">
            <a class="cta cta--solid" href="#jobs">
              Zu den Stellenangeboten
              <span aria-hidden="true">‚Üó</span>
            </a>
            <a class="cta cta--ghost" href="#bewerbung">Initiativ bewerben</a>
          </div>
          <div class="career-hero__meta">
            <div class="meta-card">
              <p class="meta-label">Onboarding</p>
              <p class="meta-value">innerhalb von 2 Wochen</p>
            </div>
            <div class="meta-card">
              <p class="meta-label">Betriebliche Altersvorsorge</p>
              <p class="meta-value">inklusive Zuschuss</p>
            </div>
            <div class="meta-card">
              <p class="meta-label">Weiterbildung</p>
              <p class="meta-value">individuelle Budgets</p>
            </div>
            <div class="meta-card">
              <p class="meta-label">Arbeitsumfeld</p>
              <p class="meta-value">Famili√§r und kollegial</p>
            </div>
          </div>
        </div>

        <div class="career-hero__visual">
          <div class="career-hero__card">
            <div class="career-hero__card-header">
              <p class="eyebrow">Miteinander arbeiten</p>
              <p class="headline">Wir setzen auf Teams, die Verantwortung √ºbernehmen und Sicherheit leben.</p>
            </div>
            <div class="career-hero__stats">
            </div>
            <div class="career-hero__image">
              <img src="/images/cta-bild.jpg" alt="Team von Babylon Bahndienste im Einsatz" loading="lazy">
              <div class="career-hero__badge">
                <span class="dot dot--gold" aria-hidden="true" />
                Teil eines starken Teams
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="section__header">
        <div>
          <p class="eyebrow">Deine Vorteile</p>
          <h2>Was dich bei uns erwartet</h2>
          <p class="section__lead">
            Wir bieten dir planbare Eins√§tze, moderne Ausstattung und ein Umfeld, das Weiterentwicklung aktiv f√∂rdert.
          </p>
        </div>
      </div>
      <div class="benefits-grid">
        <article v-for="benefit in benefits" :key="benefit.title" class="benefit-card">
          <div class="benefit-card__icon" aria-hidden="true">{{ benefit.icon }}</div>
          <div>
            <h3>{{ benefit.title }}</h3>
            <p>{{ benefit.description }}</p>
          </div>
        </article>
      </div>
    </section>

    <section class="section">
      <div class="section__header section__header--split">
        <div>
          <p class="eyebrow">Einstieg</p>
          <h2>W√§hle deinen Weg</h2>
          <p class="section__lead">
            Ob Ausbildung, Quereinstieg oder F√ºhrung: Wir begleiten dich mit klaren Onboarding-Pfaden und Mentor:innen.
          </p>
        </div>
        <NuxtLink to="/kontakt" class="cta cta--gold">Kontakt aufnehmen</NuxtLink>
      </div>
      <div class="tracks-grid">
        <article v-for="track in tracks" :key="track.title" class="track-card" :data-accent="track.accent">
          <div class="track-card__badge" :data-accent="track.accent" aria-hidden="true" />
          <h3>{{ track.title }}</h3>
          <p>{{ track.description }}</p>
          <a :href="track.link" class="text-link">
            Zu den Stellenangeboten
            <span aria-hidden="true">‚Üó</span>
          </a>
        </article>
      </div>
    </section>

    <section class="section section--panel">
      <div class="culture-panel">
        <div class="culture-panel__content">
          <p class="eyebrow">Team & Kultur</p>
          <h2>Wir arbeiten partnerschaftlich, sicherheitsf√ºhrend und mit klarer Kommunikation.</h2>
          <p class="section__lead">
            Bei uns stehen Menschen im Mittelpunkt. Wir setzen auf Respekt, Verl√§sslichkeit und echte Teamarbeit ‚Äì auf
            der Schiene, auf der Baustelle und im Austausch miteinander.
          </p>
          <ul class="culture-list">
            <li>Feste Ansprechpartner:innen in der Disposition</li>
            <li>Transparente Schicht- und Einsatzplanung</li>
            <li>Dokumentierte Unterweisungen und moderne Tools</li>
          </ul>
        </div>
        <div class="culture-panel__contact">
          <div class="contact-card">
            <div class="contact-card__header">
              <p class="eyebrow">Ansprechpartner</p>
              <h3>Sanharip Aras</h3>
              <p class="contact-card__role">Leitung</p>
            </div>
            <div class="contact-card__details">
              <a class="contact-link" href="mailto:karriere@babylon-bahndienste.de">
                <span aria-hidden="true">‚úâÔ∏è</span>
                info@babylon-bahndienste.de
              </a>
              <a class="contact-link" href="tel:+491607050005">
                <span aria-hidden="true">üìû</span>
                +49 123 456 789
              </a>
            </div>
            <NuxtLink to="/kontakt" class="cta cta--solid contact-card__cta">
              Gespr√§ch vereinbaren
              <span aria-hidden="true">‚Üó</span>
            </NuxtLink>
          </div>
        </div>
      </div>
    </section>

    <section id="jobs" class="section">
      <div class="section__header section__header--split">
        <div>
          <p class="eyebrow">Offene Stellen</p>
          <h2>Werde Teil unseres Teams</h2>
          <p class="section__lead">
            Aktuell suchen wir Kolleg:innen, die Einsatzbereitschaft, Sicherheitsbewusstsein und Freude am Miteinander
            mitbringen.
          </p>
        </div>
        <a class="cta cta--ghost" href="#bewerbung">Initiativbewerbung</a>
      </div>
      <div class="positions-list">
        <article v-for="position in positions" :key="position.title" class="position-card">
          <div class="position-card__meta">
            <p class="position-card__category">{{ position.category }}</p>
            <span class="pill">{{ position.location }}</span>
            <span class="pill pill--ghost">{{ position.shift }}</span>
          </div>
          <h3>{{ position.title }}</h3>
          <p>{{ position.description }}</p>
          <div class="position-card__actions">
            <NuxtLink :to="position.link" class="cta cta--inline">
              Gespr√§ch anfragen
              <span aria-hidden="true">‚Üó</span>
            </NuxtLink>
          </div>
        </article>
      </div>
    </section>

    <section id="bewerbung" class="section section--panel">
      <div class="application">
        <div class="application__header">
          <div>
            <p class="eyebrow">Initiativbewerbung</p>
            <h2>Nichts Passendes dabei? √úberzeuge uns trotzdem.</h2>
            <p class="section__lead">
              Wir freuen uns √ºber jede Bewerbung von Menschen, die Eisenbahn leben. Erz√§hle uns von deinen St√§rken,
              Qualifikationen und Einsatzw√ºnschen.
            </p>
          </div>
          <span class="application__accent">Jetzt bewerben!</span>
        </div>
        <form class="application__form" @submit.prevent>
          <div class="form-grid">
            <label class="field">
              <span>Vorname</span>
              <input type="text" name="vorname" placeholder="Max">
            </label>
            <label class="field">
              <span>Nachname *</span>
              <input type="text" name="nachname" placeholder="Mustermann" required>
            </label>
            <label class="field">
              <span>Firma</span>
              <input type="text" name="firma" placeholder="Optional">
            </label>
            <label class="field">
              <span>E-Mail *</span>
              <input type="email" name="email" placeholder="beispiel@mail.de" required>
            </label>
            <label class="field">
              <span>Telefonnummer *</span>
              <input type="tel" name="telefon" placeholder="+49" required>
            </label>
          </div>
          <label class="field field--wide">
            <span>Nachricht</span>
            <textarea
              name="nachricht"
              rows="5"
              placeholder="Erz√§hle uns von deinen Qualifikationen und Einsatzw√ºnschen."
            ></textarea>
          </label>
          <div class="upload-row">
            <label class="upload">
              <input type="file" name="anhang" accept="application/pdf">
              <span>PDF-Datei anh√§ngen (optional)</span>
            </label>
            <button class="cta cta--solid" type="submit">
              Absenden
              <span aria-hidden="true">‚Üí</span>
            </button>
          </div>
        </form>
      </div>
    </section>
  </div>
</template>
